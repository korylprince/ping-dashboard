(function(r){function t(t){for(var s,i,l=t[0],a=t[1],c=t[2],p=0,h=[];p<l.length;p++)i=l[p],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&h.push(o[i][0]),o[i]=0;for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s]);u&&u(t);while(h.length)h.shift()();return n.push.apply(n,c||[]),e()}function e(){for(var r,t=0;t<n.length;t++){for(var e=n[t],s=!0,l=1;l<e.length;l++){var a=e[l];0!==o[a]&&(s=!1)}s&&(n.splice(t--,1),r=i(i.s=e[0]))}return r}var s={},o={app:0},n=[];function i(t){if(s[t])return s[t].exports;var e=s[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=r,i.c=s,i.d=function(r,t,e){i.o(r,t)||Object.defineProperty(r,t,{enumerable:!0,get:e})},i.r=function(r){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},i.t=function(r,t){if(1&t&&(r=i(r)),8&t)return r;if(4&t&&"object"===typeof r&&r&&r.__esModule)return r;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:r}),2&t&&"string"!=typeof r)for(var s in r)i.d(e,s,function(t){return r[t]}.bind(null,s));return e},i.n=function(r){var t=r&&r.__esModule?function(){return r["default"]}:function(){return r};return i.d(t,"a",t),t},i.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],a=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=a;n.push([0,"chunk-vendors"]),e()})({0:function(r,t,e){r.exports=e("56d7")},"56d7":function(r,t,e){"use strict";e.r(t);var s=e("2b0e"),o=function(){var r=this,t=r.$createElement,e=r._self._c||t;return e("div",{staticClass:"app"},[r.error?e("div",{staticClass:"error"},[r._v("Error: "+r._s(r.error))]):r._e(),r._l(r.computedCategories,(function(t,s){return e("div",{key:s,staticClass:"category"},[e("div",{staticClass:"category-name"},[r._v(r._s(t.category))]),e("div",{staticClass:"hosts"},r._l(t.hosts,(function(t,s){return e("div",{key:s,staticClass:"host",style:r._f("color")(t)},[e("div",{staticClass:"host-name"},[r._v(r._s(t.host))]),e("div",{directives:[{name:"show",rawName:"v-show",value:0===t.ips.length&&null==t.error,expression:"host.ips.length === 0 && host.error == null"}],staticClass:"loading"}),e("div",{staticClass:"ips"},r._l(t.ips,(function(t,s){return e("div",{key:s,staticClass:"ip"},[e("div",{staticClass:"ip-ip"},[r._v(r._s(t.ip)+" "),e("div",{directives:[{name:"show",rawName:"v-show",value:null==t.latency,expression:"ip.latency == null"}],staticClass:"loading"}),e("div",{directives:[{name:"show",rawName:"v-show",value:null!=t.latency&&null==t.error,expression:"ip.latency != null && ip.error == null"}],staticClass:"ip-latency"},[r._v(r._s(t.latency/1e3)+"ms")]),null!=t.error?e("div",{staticClass:"ip-error"},[r._v("No Response")]):r._e()])])})),0),t.error?e("div",{staticClass:"host-error"},[r._v(r._s(t.error))]):r._e()])})),0),s!==r.categories.length-1?e("hr"):r._e()])}))],2)},n=[],i={data(){return{categories:[],hostsIdx:{},ipIdx:{},error:null}},computed:{errors(){const r=[];for(const t of this.categories)for(const e of t.hosts)if(null==e.error)for(const t of e.ips)null==t.error||r.push(e);else r.push(e);return r.sort((r,t)=>r.host.localeCompare(t.host)),{category:"Errors",hosts:r}},computedCategories(){const r=this.errors;return 0===r.hosts.length?this.categories:[r].concat(this.categories)}},filters:{color(r){const t=r.ips.filter(r=>null==r.latency).length;if(null==r.error&&0===r.ips.length||t>0)return{backgroundColor:"#c9daf8"};const e=r.ips.filter(r=>null!=r.error).length;return null!=r.error||r.ips.length===e?{backgroundColor:"#f4cccc"}:e>0?{backgroundColor:"#fce5cd"}:{backgroundColor:"#b7e1cd"}}},async created(){let r="wss://";"http:"==window.location.protocol&&(r="ws://");const t=new WebSocket(`${r}${window.location.host}/ws`);t.addEventListener("error",r=>{this.error=JSON.stringify(r),console.error({msg:"websocket error:",error:r})}),t.addEventListener("message",r=>{const t=JSON.parse(r.data);switch(t.t){case"u":window.location="/auth";break;case"s":for(const r of t.s){const t={category:r.category,hosts:[]};this.categories.push(t);for(const e of r.hosts){const r={host:e,ips:[],error:null};t.hosts.push(r),e in this.hostsIdx?this.hostsIdx[e].push(r):this.hostsIdx[e]=[r]}}break;case"r":if(null!=t.i){for(const r of t.i){let e;if(r in this.ipIdx)e=this.ipIdx[r];else{let t=0;for(const[e,s]of r.split(".").entries())t+=s<<3-e;e={ip:r,latency:null,sortVal:t,error:null},this.ipIdx[r]=e}for(const r of this.hostsIdx[t.h])r.ips.push(e)}for(const r of this.hostsIdx[t.h])r.ips.sort((r,t)=>r.sortVal-t.sortVal)}else if(null!=t.e)for(const r of this.hostsIdx[t.h])r.error=t.e;break;case"p":if(!(t.i in this.ipIdx)){let r=0;for(const[e,s]of t.i.split(".").entries())r+=s<<3-e;return void(this.ipIdx[t.i]={ip:t.i,latency:t.l,sortVal:r,error:t.e})}this.ipIdx[t.i].latency=t.l,this.ipIdx[t.i].error=t.e;break;case"c":null!=t.e&&(this.error=t.e)}})}},l=i,a=(e("cf25"),e("2877")),c=Object(a["a"])(l,o,n,!1,null,null,null),u=c.exports;new s["a"]({render:r=>r(u)}).$mount("#app")},cf25:function(r,t,e){"use strict";e("fea6")},fea6:function(r,t,e){}});
//# sourceMappingURL=app.8bd6fab3.js.map