(function(r){function e(e){for(var s,i,l=e[0],a=e[1],c=e[2],p=0,h=[];p<l.length;p++)i=l[p],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&h.push(o[i][0]),o[i]=0;for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s]);u&&u(e);while(h.length)h.shift()();return n.push.apply(n,c||[]),t()}function t(){for(var r,e=0;e<n.length;e++){for(var t=n[e],s=!0,l=1;l<t.length;l++){var a=t[l];0!==o[a]&&(s=!1)}s&&(n.splice(e--,1),r=i(i.s=t[0]))}return r}var s={},o={app:0},n=[];function i(e){if(s[e])return s[e].exports;var t=s[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=r,i.c=s,i.d=function(r,e,t){i.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:t})},i.r=function(r){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},i.t=function(r,e){if(1&e&&(r=i(r)),8&e)return r;if(4&e&&"object"===typeof r&&r&&r.__esModule)return r;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var s in r)i.d(t,s,function(e){return r[e]}.bind(null,s));return t},i.n=function(r){var e=r&&r.__esModule?function(){return r["default"]}:function(){return r};return i.d(e,"a",e),e},i.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],a=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=a;n.push([0,"chunk-vendors"]),t()})({0:function(r,e,t){r.exports=t("56d7")},"56d7":function(r,e,t){"use strict";t.r(e);var s=t("2b0e"),o=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",{staticClass:"app"},[r.error?t("div",{staticClass:"error"},[r._v("Error: "+r._s(r.error))]):r._e(),r._l(r.computedCategories,(function(e,s){return t("div",{key:s,staticClass:"category"},[t("div",{staticClass:"category-name"},[r._v(r._s(e.category))]),t("div",{staticClass:"hosts"},r._l(e.hosts,(function(e,s){return t("div",{key:s,staticClass:"host",style:r._f("color")(e)},[t("div",{staticClass:"host-name"},[r._v(r._s(e.host))]),t("div",{directives:[{name:"show",rawName:"v-show",value:0===e.ips.length&&null==e.error,expression:"host.ips.length === 0 && host.error == null"}],staticClass:"loading"}),t("div",{staticClass:"ips"},r._l(e.ips,(function(e,s){return t("div",{key:s,staticClass:"ip"},[t("div",{staticClass:"ip-ip"},[r._v(r._s(e.ip)+" "),t("div",{directives:[{name:"show",rawName:"v-show",value:null==e.latency,expression:"ip.latency == null"}],staticClass:"loading"}),t("div",{directives:[{name:"show",rawName:"v-show",value:null!=e.latency&&null==e.error,expression:"ip.latency != null && ip.error == null"}],staticClass:"ip-latency"},[r._v(r._s(e.latency/1e3)+"ms")]),null!=e.error?t("div",{staticClass:"ip-error"},[r._v("No Response")]):r._e()])])})),0),e.error?t("div",{staticClass:"host-error"},[r._v(r._s(e.error))]):r._e()])})),0),s!==r.categories.length-1?t("hr"):r._e()])}))],2)},n=[],i={data(){return{categories:[],hostsIdx:{},ipIdx:{},error:null}},computed:{errors(){const r=[];for(const e of this.categories)for(const t of e.hosts)if(null==t.error)for(const e of t.ips)null==e.error||r.push(t);else r.push(t);return r.sort((r,e)=>r.host.localeCompare(e.host)),{category:"Errors",hosts:r}},computedCategories(){const r=this.errors;return 0===r.hosts.length?this.categories:[r].concat(this.categories)}},filters:{color(r){const e=r.ips.filter(r=>null==r.latency).length;if(null==r.error&&0===r.ips.length||e>0)return{backgroundColor:"#c9daf8"};const t=r.ips.filter(r=>null!=r.error).length;return null!=r.error||r.ips.length===t?{backgroundColor:"#f4cccc"}:t>0?{backgroundColor:"#fce5cd"}:{backgroundColor:"#b7e1cd"}}},async created(){let r;try{r=await(await fetch("token")).text()}catch(t){return this.error=JSON.stringify(t),void console.error({msg:"token error:",error:t})}const e=new WebSocket("ws://localhost/ws");e.addEventListener("error",r=>{this.error=JSON.stringify(r),console.error({msg:"websocket error:",error:r})}),e.addEventListener("open",()=>{e.send(JSON.stringify({token:r}))}),e.addEventListener("message",r=>{const e=JSON.parse(r.data);switch(e.t){case"s":for(const r of e.s){const e={category:r.category,hosts:[]};this.categories.push(e);for(const t of r.hosts){const r={host:t,ips:[],error:null};e.hosts.push(r),t in this.hostsIdx?this.hostsIdx[t].push(r):this.hostsIdx[t]=[r]}}break;case"r":if(null!=e.i){for(const r of e.i){let t;if(r in this.ipIdx)t=this.ipIdx[r];else{let e=0;for(const[t,s]of r.split(".").entries())e+=s<<3-t;t={ip:r,latency:null,sortVal:e,error:null},this.ipIdx[r]=t}for(const r of this.hostsIdx[e.h])r.ips.push(t)}for(const r of this.hostsIdx[e.h])r.ips.sort((r,e)=>r.sortVal-e.sortVal)}else if(null!=e.e)for(const r of this.hostsIdx[e.h])r.error=e.e;break;case"p":if(!(e.i in this.ipIdx)){let r=0;for(const[t,s]of e.i.split(".").entries())r+=s<<3-t;return void(this.ipIdx[e.i]={ip:e.i,latency:e.l,sortVal:r,error:e.e})}this.ipIdx[e.i].latency=e.l,this.ipIdx[e.i].error=e.e;break;case"c":null!=e.e&&(this.error=e.e)}})}},l=i,a=(t("cf25"),t("2877")),c=Object(a["a"])(l,o,n,!1,null,null,null),u=c.exports;new s["a"]({render:r=>r(u)}).$mount("#app")},cf25:function(r,e,t){"use strict";t("fea6")},fea6:function(r,e,t){}});
//# sourceMappingURL=app.dbe9c23f.js.map